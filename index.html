<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predicciones de F√∫tbol</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Predictor de Partidos de F√∫tbol</h1>
            <h3>An√°lisis de Rendimiento y Predicciones</h3>
            <p class="small">Datos cortes√≠a de la API p√∫blica de ESPN.</p>
        </div>

        <div class="card">
            <h4>Selecci√≥n de Equipos y Liga</h4>
            <div class="grid">
                <div>
                    <label for="leagueSelect">Selecciona la Liga:</label>
                    <select id="leagueSelect"></select>
                </div>
                <div>
                    <label for="teamHome">Equipo Local:</label>
                    <select id="teamHome"></select>
                </div>
                <div>
                    <label for="teamAway">Equipo Visitante:</label>
                    <select id="teamAway"></select>
                </div>
            </div>
            <div class="sep"></div>
            <div class="grid">
                <button id="recalc" class="btn" disabled>Calcular Predicciones</button>
                <button id="reset" class="btn">Limpiar Todo</button>
            </div>
        </div>

        <div class="card">
            <h4>An√°lisis de Equipos</h4>
            <div class="grid">
                <div class="stat-card" id="homeStats">
                    <div class="stat-title" id="formHomeTeam">Local: ‚Äî</div>
                    <div class="stat-values" id="formHomeBox">
                        <div class="stat-section" data-testid="general-home">
                            <span class="section-title">Rendimiento General</span>
                            <div class="stat-metrics">
                                <span>PJ: 0</span>
                                <span>Puntos: 0</span>
                                <span>DG: 0</span>
                            </div>
                        </div>
                        <div class="stat-section" data-testid="local-home">
                            <span class="section-title">Rendimiento de Local</span>
                            <div class="stat-metrics">
                                <span>PJ: 0</span>
                                <span>PG: 0</span>
                                <span>DG: 0</span>
                            </div>
                        </div>
                        <div class="stat-section" data-testid="visitante-home">
                            <span class="section-title">Rendimiento de Visitante</span>
                            <div class="stat-metrics">
                                <span>PJ: 0</span>
                                <span>PG: 0</span>
                                <span>DG: 0</span>
                            </div>
                        </div>
                        <div class="stat-legend-text">PJ: Partidos Jugados, Puntos: Puntos Totales, PG: Partidos Ganados, DG: Diferencia de Goles</div>
                    </div>
                </div>
                <div class="stat-card" id="awayStats">
                    <div class="stat-title" id="formAwayTeam">Visitante: ‚Äî</div>
                    <div class="stat-values" id="formAwayBox">
                        <div class="stat-section" data-testid="general-away">
                            <span class="section-title">Rendimiento General</span>
                            <div class="stat-metrics">
                                <span>PJ: 0</span>
                                <span>Puntos: 0</span>
                                <span>DG: 0</span>
                            </div>
                        </div>
                        <div class="stat-section" data-testid="local-away">
                            <span class="section-title">Rendimiento de Local</span>
                            <div class="stat-metrics">
                                <span>PJ: 0</span>
                                <span>PG: 0</span>
                                <span>DG: 0</span>
                            </div>
                        </div>
                        <div class="stat-section" data-testid="visitante-away">
                            <span class="section-title">Rendimiento de Visitante</span>
                            <div class="stat-metrics">
                                <span>PJ: 0</span>
                                <span>PG: 0</span>
                                <span>DG: 0</span>
                            </div>
                        </div>
                        <div class="stat-legend-text">PJ: Partidos Jugados, Puntos: Puntos Totales, PG: Partidos Ganados, DG: Diferencia de Goles</div>
                    </div>
                </div>
            </div>
            
            <div class="table-like">
                <label>Posici√≥n:</label>
                <div class="correction-factors">
                    <div class="correction-factor"><span class="label">Local</span><span class="value" id="posHome">0</span></div>
                    <div class="correction-factor"><span class="label">Visitante</span><span class="value" id="posAway">0</span></div>
                </div>
                <label>Promedio de Goles Anotados:</label>
                <div class="correction-factors">
                    <div class="correction-factor"><span class="label">Local</span><span class="value" id="gfHome">0.00</span></div>
                    <div class="correction-factor"><span class="label">Visitante</span><span class="value" id="gfAway">0.00</span></div>
                </div>
                <label>Promedio de Goles Recibidos:</label>
                <div class="correction-factors">
                    <div class="correction-factor"><span class="label">Local</span><span class="value" id="gaHome">0.00</span></div>
                    <div class="correction-factor"><span class="label">Visitante</span><span class="value" id="gaAway">0.00</span></div>
                </div>
            </div>
            <div class="sep"></div>
        </div>

        <div class="card kpis">
            <h4>Probabilidades del Partido</h4>
            <div class="kpis-row">
                <div class="tile">
                    <div class="small">Victoria Local</div>
                    <strong id="pHome">‚Äî</strong>
                </div>
                <div class="tile">
                    <div class="small">Empate</div>
                    <strong id="pDraw">‚Äî</strong>
                </div>
                <div class="tile">
                    <div class="small">Victoria Visitante</div>
                    <strong id="pAway">‚Äî</strong>
                </div>
            </div>
            <div class="kpis-row">
                <div class="tile">
                    <div class="small">Ambos Anotan</div>
                    <strong id="pBTTS">‚Äî</strong>
                </div>
                <div class="tile">
                    <div class="small">+2.5 Goles</div>
                    <strong id="pO25">‚Äî</strong>
                </div>
            </div>
        </div>

        <div class="card">
            <h4>Recomendaci√≥n de Apuesta</h4>
            <div class="bet-slip pulse" id="suggestion">
                <div class="recs">
                    <div class="error">
                        <strong>No hay suficientes datos.</strong><br>
                        Selecciona una liga y ambos equipos para ver las predicciones.
                    </div>
                </div>
            </div>
            <div class="sep"></div>
            <h4>Factores de Correcci√≥n Aplicados</h4>
            <div class="stat-legend">
                <div>Ventaja de Local√≠a: <span id="homeAdvantageFactor">‚Äî</span></div>
                <div>Diferencia de Fuerza: <span id="strengthFactor">‚Äî</span></div>
                <div>Ajuste Dixon-Coles: <span id="dixonColesFactor">‚Äî</span></div>
            </div>
        </div>

        <div id="details" class="recs small">
            </div>

    </div>

    <div class="floating-calendar-container" id="floatingCalendarContainer">
        <div class="floating-calendar-header">
            <h3>Partidos para HOY üóìÔ∏è <span id="calendarDate"></span></h3>
            <button id="closeCalendar" class="close-btn">‚úñ</button>
        </div>
        <div id="calendarEvents" class="calendar-events">
            <div class="calendar-loading">Cargando partidos...</div>
        </div>
        <button id="toggleCalendarBtn" class="toggle-calendar-btn">Calendario</button>
    </div>

    <script>
        // ¬°IMPORTANTE! Reemplaza este valor con la URL de tu App Web de Google Apps Script.
        const WEBAPP_URL = "YOUR_APPS_SCRIPT_WEB_APP_URL_HERE";
    </script>
    <script src="script.js"></script>
</body>
</html>
